#@data/values-schema
---
#! all scdf options
scdf:
  deploy:
    #! deploy mode, either minikube or cloud
    mode: minikube
    binder:
      #! if binder deployment is enabled
      enabled: true
      type: rabbit
      rabbit:
        #@schema/type any=True
        config:
    #! deploy database settings
    database:
      #! if database deployment is enabled
      enabled: true
      #! database type, either mysql or postgres (required)
      type: postgres
      #! database username (defaults to dataflow)
      username: ZGF0YWZsb3c=
      #! database password (default to secret)
      password: c2VjcmV0
  server:
    image:
      #! dataflow server image repository id
      repository: springcloud/spring-cloud-dataflow-server
      #! dataflow server image tag (required)
      tag: ""
    metrics:
      dashboard:
        url: ""
    database:
      url: ""
      username: ""
      password: ""
      driverClassName: ""
      testOnBorrow: true
      validationQuery: ""
    #! additional dataflow server configuration
    #@schema/type any=True
    config:
  ctr:
    image:
      #! ctr image repository id
      repository: springcloud/spring-cloud-dataflow-composed-task-runner
      #! ctr image tag (required)
      tag: ""
  skipper:
    image:
      #! skipper server image repository id
      repository: springcloud/spring-cloud-skipper-server
      #! skipper server image tag (required)
      tag: ""
    database:
      url: ""
      username: ""
      password: ""
      driverClassName: ""
      testOnBorrow: true
      validationQuery: ""
    #! additional skipper server configuration
    #@schema/type any=True
    config:
  #! external binder settings, will disable binder deployment
  binder:
    kafka:
      host: ""
      port: 9092
    rabbit:
      host: ""
      port: 5672
  #! optional feature
  feature:
    monitoring:
      prometheus:
        enabled: false
        image:
          repository: prom/prometheus
          tag: v2.12.0
      grafana:
        enabled: false
        image:
          repository: springcloud/spring-cloud-dataflow-grafana-prometheus
          tag: ""
      prometheusRsocketProxy:
        enabled: false
        image:
          repository: micrometermetrics/prometheus-rsocket-proxy
          tag: 1.0.0
